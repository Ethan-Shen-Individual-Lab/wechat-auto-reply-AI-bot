# wechat-auto-reply-bot


## 项目概述

该项目是一个自动回复微信消息的脚本，结合了Selenium和大型语言模型API来实现自动回复功能。它可以帮助你在微信网页版中自动回复指定联系人的消息。

## 从代码中读取的内容

1. **功能**: 该脚本能够自动回复微信网页版中指定联系人的消息，回复内容由大型语言模型生成。
2. **技术**: 使用Selenium控制Chrome浏览器，操作微信网页版；使用OpenAI的API生成回复内容。
3. **前置条件**: 需要安装Chrome浏览器和Selenium驱动，以及配置大型语言模型的API Key。
4. **注意事项**: 由于谷歌的反爬机制，直接运行脚本可能会遇到登录问题，需要手动加载特定的Chrome插件。

## 前置工作

1. **大型语言模型API Key**:
   - 你需要拥有一个大型语言模型的API Key，例如OpenAI的API Key。
   - 在代码中`self.client = OpenAI(api_key="", base_url="https://dashscope.aliyuncs.com/compatible-mode/v1")`处填写你的API Key。
   - 不同大型语言模型的API调用方式可能有所不同，请参考相应大型语言模型的官方文档进行配置。

## 安装插件

1. **插件下载**:
   - 你需要安装一个特定的Chrome插件，该插件允许在Chrome浏览器中打开微信网页版。
   - 插件代码下载地址: [wechat-need-web](https://github.com/lqzhgood/wechat-need-web/releases)

2. **操作描述**:
   - 详细的操作步骤请参考: [知乎文章](https://zhuanlan.zhihu.com/p/754480320)

## 使用步骤

1. **运行脚本**:
   - 直接运行脚本即可。进入py文件所在目录，然后：
   - `` python wechat_auto_reply.py ``
   - 代码会开始运行。
   - 运行脚本时，系统会要求你输入自己的微信名称和需要自动回复的用户名称。
   - 例如：
     ```
     请输入配置信息：
     请输入您的微信名称: 你的微信名称
     请输入需要自动回复的用户名称（多个用逗号分隔）: 用户1, 用户2
     ```
   - 如果不需要输入这些信息，可以在代码中进行修改。

3. **处理登录问题**:
   - 由于谷歌的反爬机制，直接运行脚本可能会导致无法扫码登录。
   - **解决方案**:
     1. 打开Chrome浏览器窗口后，手动加载插件（`chrome://extensions/`）。
     2. 将下载的插件解压后，点击“加载已解压的扩展程序”，选择插件文件夹。
     3. 使用微信小号扫码登录。
     ```markdown
      ![Alt text](c3ab36a5db506c306e0bf3fb15b1fda.png)
     ```
     ```markdown
      ![Alt text](5673e5588049a36afe0efee300ff5e0.png)
     ```
4. **开始自动回复**:
   - 登录成功后，脚本会开始监听消息，并自动回复指定用户的最新消息。

## 技术细节

- **网页爬虫操作**: 使用Selenium操作微信网页版，获取和发送消息。
- **扩展程序加载微信**: 插件使得微信网页版在Chrome中正常运行，对话框内的元素结构清晰，便于Selenium操作。
- **大型语言模型回复**: 使用大型语言模型生成回复内容，回复内容简短，并根据内容长度设置停顿时间，减少被检测的风险。

## 亮点

- **回复简短且有停顿**: 每次调用大型语言模型时，提示词要求回复简短，并根据回复长度设置停顿时间，降低被检测的风险。
- **自动回复功能**: 自动回复指定用户的最新消息，节省时间和精力。

## 其他

- **封号风险**: 由于使用了插件和脚本，可能会被微信或谷歌检测到，存在封号风险。请谨慎使用。
- **功能和局限**:
  1. **指定用户回复**: 目前只能回复配置中指定的用户，且需要手动点击对话对象。
  2. **提示词简陋**: 提示词比较简单，可能需要根据具体需求进行优化。
  3. **未引入记忆机制**: 目前调用大模型的代码部分只是简单的单次回复，暂时没有引入记忆。
